<style type="text/css">
<!--
/************ Table ************/
.xwtable {width: 100%;border-collapse: collapse;border: 1px solid #ccc;}                
.xwtable thead td {font-size: 12px;color: #333333;text-align: center;background-color: #dedede;border: 1px solid #ccc; font-weight:bold;}
.xwtable tbody tr {background: #fff;font-size: 12px;color: #666666;}    
.xwtable tbody tr:nth-child(2n){background:#f2f7fc; }    
.xwtable tbody tr:hover{background:#cecece; }    
.xwtable tbody tr.alt-row {background: #f2f7fc;}               
.xwtable td{line-height:20px;text-align: left;padding:4px 10px 3px 10px;height: 18px;border: 1px solid #ccc;}
-->
</style>
<div class="pageContent" style="overflow:scroll;overflow-y:auto;" >
<br>
<center>
<h2>牛牛金融构建环境</h2>
</center>
<br>
<table class="xwtable">
    <thead>
    <tr>
        <td>构建环境</td>
        <td>地址</td>
        <td>文件路径</td>
        <td>备注</td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>测试环境</td>
        <td><a href="http://192.168.1.3:8080" target="_blank">http://192.168.1.3:8080</a></td>
        <td>D:\servers\Jenkins\workspace</td>
        <td></td>
    </tr>
    <tr>
        <td>生产环境</td>
        <td><a href="http://192.168.1.3:9081/jenkins" target="_blank">http://192.168.1.3:9081/jenkins</a></td>
        <td>D:\jenkins-product\jobs\${projectName}\workspace</td>
        <td></td>
    </tr>
    <tr>
        <td>nexus maven 私服</td>
        <td><a href="http://192.168.1.3:8081/nexus" target="_blank">http://192.168.1.3:8081/nexus</a></td>
        <td></td>
        <td>账号：admin，密码：admin123</td>
    </tr>
    </tbody>
</table>

<br>
<center>
<h2>生产环境应用/服务配置说明</h2>
</center>
<br>
<table class="xwtable">
      <thead>
        <tr>
        <td>应用/服务</td>
        <td>网址</td>
        <td>服务器地址</td>
        <td>端口</td>
        <td>物理路径</td>
        <td>备注</td>
        </tr>
      </thead>
      <tbody>
        <tr>
            <td rowspan="2">Apache服务器</td>
            <td></td>
            <td>121.40.68.115</td>
            <td>80</td>
            <td>/usr/local/apache2</td>
            <td>
                web服务器，代理ijinzheng.com，www.niuniu.com两个网站<br>
                启动方式：进入/usr/local/apache2/bin
                执行./apachectl start|stop|restart
            </td>
        </tr>
        <tr>
            <td></td>
            <td>112.124.98.197</td>
            <td>80</td>
            <td>C:\Program Files (x86)\Apache Software Foundation\Apache2.2</td>
            <td>web服务器，代理的网站和服务包括：董办APP试用服务端（db.niuniu.com），
            禅道项目管理系统（pm.niuniu.com)，crm系统(crm.niuniu.com)，牛牛金融后台(mp.niuniu.com)，牛牛金融后台单点登录服务(sso.niuniu.com)<br>
            重启方式：<br>
                远程连接到服务器，右键点击任务栏Apache图标，点击 Open Apache Monitor
                弹出Apache监听窗口，点击Restart重启
            </td>
        </tr>
         <tr>
            <td rowspan="3">nginx服务器</td>
            <td></td>
            <td>121.40.79.161</td>
            <td>80</td>
            <td>/etc/nginx,/tol/logs/nginx</td>
            <td>web服务器，代理的网站和服务包括：舆情监测系统(yq.niuniu.com)，webservice服务（ws.niuniu.com),投资者关系模块（ir.niuniu.com),app服务端（app1.niuniu.com),微信公众号模块（已弃用）(m.niuniu.com)<br>
            启动方式：任意目录执行：service nginx start|stop
            </td>
        </tr>
         <tr>
            <td>img1.niuniu.com</td>
            <td>114.215.200.66</td>
            <td>80</td>
            <td>/etc/nginx</td>
            <td>图片与文件代理服务器，通过阿里云CDN配置为img.niuniu.com</td>
        </tr>
        <tr>
            <td></td>
            <td>118.178.230.0</td>
            <td>80</td>
            <td>/etc/nginx</td>
            <td>代理舆情文件接收服务器（push.yq.niuniu.com)<br>
                启动方式：任意目录执行：service nginx start|stop
            </td>
        </tr>

        <tr>
            <td>牛牛金融网站</td>
            <td>www.niuniu.com</td>
            <td>121.40.79.161</td>
            <td>8088</td>
            <td>/var/tomcat/tomcat8</td>
            <td>牛牛金融官方网站</td>
        </tr>
        <tr>
            <td>牛牛金融后台管理</td>
            <td>mp.niuniu.com</td>
            <td>121.40.117.9</td>
            <td>8080</td>
            <td>/var/tomcat/tomcat-7</td>
            <td>后台管理系统，包含大部分牛牛金融后台功能</td>
        </tr>
        <tr>
            <td rowspan="2">牛牛金融APP服务</td>
            <td rowspan="2">app1.niuniu.com</td>
            <td>114.215.200.66</td>
            <td>8090</td>
            <td>/usr/local/tomcat-app/</td>
            <td rowspan="2">2节点集群模式，通过apache服务器提供负载均衡，Rest风格的app接口服务</td>
        </tr>
        <tr>
            <td>121.40.79.161</td>
            <td>8080</td>
            <td>/var/tomcat/tomcat-app/</td>
        </tr>
        <tr>
            <td>webservice 服务</td>
            <td>ws.niuniu.com</td>
            <td>121.40.79.161</td>
            <td>8089</td>
            <td>/var/tomcat/webservice</td>
            <td>主要为证券事务系统PC端提供互联网数据接口服务</td>
        </tr>
        <tr>
            <td>ir web网站/服务</td>
            <td>ir.niuniu.com</td>
            <td>121.40.79.161</td>
            <td>8099</td>
            <td>/var/tomcat/weplatform</td>
            <td>投资者关系管理相关的web网站和后台管理服务</td>
        </tr>
        <tr>
            <td>SSO后台单点登录服务</td>
            <td>sso.niuniu.com</td>
            <td>121.40.117.9</td>
            <td>9098</td>
            <td>/var/tomcat/tomcat-sso</td>
            <td>为牛牛金融各后台管理模块提供单点登录服务</td>
        </tr>
        <tr>
            <td>APP推送服务</td>
            <td></td>
            <td>121.40.68.115</td>
            <td>8000</td>
            <td>/usr/local/tomcat-push</td>
            <td>为IOS和Android设备提供推送服务</td>
        </tr>
        <tr>
            <td>定时任务服务</td>
            <td></td>
            <td>121.40.117.9</td>
            <td>8088</td>
            <td>/var/tomcat/default</td>
            <td>目前大多数的定时任务处理都在该服务中</td>
        </tr>
        <tr>
            <td>微信网站/后台</td>
            <td>m.niuniu.com</td>
            <td>121.40.79.161</td>
            <td>8090</td>
            <td>/var/tomcat/weixin</td>
            <td>微信公众号网站和后台</td>
        </tr>
        <tr>
            <td>舆情监测系统</td>
            <td>yq.niuniu.com</td>
            <td>118.178.230.0</td>
            <td>8085</td>
            <td>/var/tomcat/tomcat-yq-client/</td>
            <td>包括媒介部的舆情监测系统yq.niuniu.com/mp，和PC端的舆情监测模块yq.niuniu.com/client</td>
        </tr>
        <tr>
            <td>舆情监测数据文件推送接收服务</td>
            <td></td>
            <td>118.178.230.0</td>
            <td>8083</td>
            <td>/var/tomcat/tomcat-yq-push</td>
            <td>实时接收蓝太平洋（舆情监测数据提供商）推送的舆情数据，文件保存在该服务器中，文件列表存在该服务器的redis队列中</td>
        </tr>
        <tr>
            <td>舆情监测数据处理服务</td>
            <td></td>
            <td>118.178.230.0</td>
            <td>8082</td>
            <td>/var/tomcat/tomcat-yq-listen</td>
            <td>监听舆情监测文件队列，将文件中的数据保存到数据库中</td>
        </tr>
        <tr>
            <td>定时任务调度中心</td>
            <td></td>
            <td>118.178.230.0</td>
            <td>8084</td>
            <td>/var/tomcat/tomcat-schedule</td>
            <td>开源xxl-job任务调度中心，目前主要处理PC端用户的舆情数据定时获取任务的调度工作</td>
        </tr>

        <tr>
            <td rowspan="2">niuniu-provider服务提供者</td>
            <td></td>
            <td>121.40.79.161</td>
            <td>20880</td>
            <td>/tol/dubbo-niuniu/niuniu-provider</td>
            <td rowspan="2">dubbo服务提供者，数据访问sqlserver和mongodb</td>
        </tr>
        <tr>
            <td></td>
            <td>121.40.117.9</td>
            <td>20880</td>
            <td>/tol/dubbo-niuniu/niuniu-provider</td>
        </tr>
        <tr>
            <td rowspan="2">weplatform-provider服务提供者</td>
            <td></td>
            <td>121.40.79.161</td>
            <td>20881</td>
            <td>/tol/dubbo-niuniu/weplatform-provider</td>
            <td rowspan="2">dubbo服务提供者，数据访问mysql</td>
        </tr>
        <tr>
            <td></td>
            <td>121.40.117.9</td>
            <td>20881</td>
            <td>/tol/dubbo-niuniu/weplatform-provider</td>
        </tr>
        <tr>
            <td>dubbo监控服务</td>
            <td></td>
            <td>114.215.200.66</td>
            <td>8888</td>
            <td>/usr/local/dubbo-monitor-simple-2.5.3</td>
            <td>监控dubbo服务提供者和消费者运行状态</td>
        </tr>
        <tr>
            <td>solr搜索引擎服务</td>
            <td></td>
            <td>114.215.200.66</td>
            <td>8080</td>
            <td>/usr/local/tomcat</td>
            <td>Lucene搜索引擎服务，目前主要用于新闻的搜索，暂时不符合当前的业务需求，可在适当的时候废弃</td>
        </tr>
        <tr>
            <td>金证互通官网</td>
            <td>www.ijinzheng.com</td>
            <td>121.40.68.115</td>
            <td>80</td>
            <td>/ijinzheng.com</td>
            <td></td>
        </tr>
        <tr>
            <td>CRM系统</td>
            <td>crm.niuniu.com</td>
            <td>112.124.114.231</td>
            <td>9000</td>
            <td>C:\NNCMS</td>
            <td>客户管理系统；IIS服务器，PHP，sqlserver</td>
        </tr>
        <tr>
            <td>禅道系统</td>
            <td>pm.niuniu.com</td>
            <td>112.124.114.231</td>
            <td>81</td>
            <td>C:\xampp\zentao\www</td>
            <td>开发部项目管理系统；xampp php集成环境</td>
        </tr> 
        <tr>
            <td rowspan="3">zookeeper</td>
            <td></td>
            <td>121.40.117.9</td>
            <td>2181</td>
            <td>/usr/local/zookeeper-3.4.6</td>
            <td rowspan="3">
            3节点集群模式，服务器之间通过内网IP访问,主要作为dubbo注册中心<br>
            启动方式：进入/usr/local/zookeeper-3.4.6/bin目录，执行<br>
            zkServer.sh start ../conf/zoo.cfg<br>
            zkServer.sh start ../conf/zoo1.cfg<br>
            zkServer.sh start ../conf/zoo2.cfg

            </td>
        </tr>
        <tr>
            <td></td>
            <td>121.40.117.9</td>
            <td>2182</td>
            <td>/usr/local/zookeeper-3.4.6</td>
        </tr>
        <tr>
            <td></td>
            <td>121.40.117.9</td>
            <td>2183</td>
            <td>/usr/local/zookeeper-3.4.6</td>
        </tr>
        <tr>
            <td rowspan="3">mongodb</td>
            <td></td>
            <td>121.40.68.115</td>
            <td>27019</td>
            <td>/usr/local/mongodb</td>
            <td>
                3节点副本集模式，服务器之间通过内网IP访问<br>
                启动方式：进入/usr/local/mongodb/bin目录，执行<br>
                ./mongod --config /usr/local/mongodb/conf/start.conf
            </td>
        </tr>
        <tr>
            <td></td>
            <td>121.40.68.115</td>
            <td>27020</td>
            <td>/usr/local/mongodb</td>
            <td>
            启动方式：进入/usr/local/mongodb/bin目录，执行<br>
                ./mongod --config /usr/local/mongodb/conf/start27020.conf
            </td>
        </tr>
        <tr>
            <td></td>
            <td>114.215.200.66</td>
            <td>27017</td>
            <td>/usr/local/mongodb</td>
            <td>
            启动方式：进入/usr/local/mongodb/bin目录，执行<br>
                ./mongod --config /usr/local/mongodb/conf/start27020.conf
            </td>
        </tr>
        <tr>
            <td rowspan="2">redis</td>
            <td></td>
            <td>114.215.200.66</td>
            <td>6379</td>
            <td>可执行文件路径：/usr/local/bin，
            配置文件路径：/etc/redis/6379.conf
            </td>
            <td>
                除舆情之外的缓存都使用该redis，需通过密码访问<br>
                密码：69^6xyd#r5fhc&2gvagfr55%ogmm55h5<br>
            启动：任意路径下执行：service redis_6379 start<br>
                关闭：任意路径下执行：service redis_6379 stop
            </td>
        </tr>
        <tr>
            <td></td>
            <td>118.178.230.0</td>
            <td>6379</td>
            <td>/usr/local/mongodb</td>
            <td>
            目前只用于蓝太平洋推送舆情监测文件的缓存服务，采用队列机制，缓存监测文件的路径，
            通过另一个监听服务监听该队列，依次解析相关文件<br>
            启动：任意路径下执行：service redis start<br>
                关闭：任意路径下执行：service redis stop
            </td>
        </tr>
      </tbody>
      </table>
</div>